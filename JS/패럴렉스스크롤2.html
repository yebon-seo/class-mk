<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>패럴렉스스크롤</title>
  <!--폰트어썸 CDN-->
  <script src="https://kit.fontawesome.com/632d3e2496.js" crossorigin="anonymous"></script>
  <style>
    *{
      margin:0; 
      padding:0;
      box-sizing: border-box;
      user-select: none;/*text드래그 금지*/
    }
    ul{list-style:none}
    a{text-decoration: none;}

    header{
      width:100%;
      display:flex;
      align-items: center;
      justify-content: space-between;
      padding:20px 80px;
    }
    .logo a{
      font-size:40px;
      color:#111;
      transition: color 0.2s;
    }
    .toggle{
      font-size:30px;
      color:#111;
      transition: color 0.2s;
    }
    .logo a:hover{color:#ff3156;}
    .toggle:hover{color:#ff3156;}

    section{
      width:1200px;
      margin:auto;
    }
    article{
      width:100%;
      padding:60px 10px;
      display:flex;
      align-items: center;
    }
    .imgBox{/*이미지의 특정부분만 보여지도록 높이를 440px로 설정*/
      width:680px;
      height:440px;
      position:relative;
      overflow:hidden;
    }
    .image{/*이미지가 들어갈 요소*/
      width:100%;
      height:800px;
      position:absolute;
      bottom:0; left:0;
    }
    article:nth-child(1) .image{background-image:url(img/parallax1.jpg);}
    article:nth-child(2) .image{background-image:url(img/parallax2.jpg);}
    article:nth-child(3) .image{background-image:url(img/parallax3.jpg);}
    article:nth-child(4) .image{background-image:url(img/parallax4.jpg);}
    article:nth-child(5) .image{background-image:url(img/parallax5.jpg);}

    .txt{
      padding-left:70px;
    }
    .txt p{
      font-size:12px;
      color:#767676;
      letter-spacing: 2px;
    }
    .txt h2{
      font-size:36px;
      color:#111;
      margin:30px 0 20px;
    }
    .txt a{
      font-size:14px;
      color:#111;
      font-weight: bold;
      transition: color 0.2s;
    }
    .txt i{
      font-size:40px;
      padding-left:20px;
      vertical-align: middle;
      transition:padding 0.2s;
    }
    .txt a:hover{color:#ff3156;}
    .txt a:hover i{padding-left:30px;}

    footer{
      width:100%;
      padding:100px 0;
      text-align: center;
      background-color:#111;
      color:#fff;
      font-size:20px;
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <a href="#">LOGO</a>
    </div>
    <a href="#" class="toggle">
      <i class="fas fa-bars"></i>
    </a>
  </header>
  <!--container-->
  <section>
    <!--a1-->
    <article>
      <div class="imgBox">
        <div class="image"></div>
      </div>
      <div class="txt">
        <p>PRODUCT DESIGN</p>
        <h2>
          Photography<br>
          collage ideas
        </h2>
        <a href="#">
          View Project
          <i class="far fa-arrow-alt-circle-right"></i>
        </a>
      </div>
    </article>
    <!--a2-->
    <article>
      <div class="imgBox">
        <div class="image"></div>
      </div>
      <div class="txt">
        <p>ILLUSTRATION</p>
        <h2>
          Beautiful Website<br>
          Interfaces
        </h2>
        <a href="#">
          View Project
          <i class="far fa-arrow-alt-circle-right"></i>
        </a>
      </div>
    </article>
    <!--a3-->
    <article>
      <div class="imgBox">
        <div class="image"></div>
      </div>
      <div class="txt">
        <p>TYPOGRAPHY, WEBSITE</p>
        <h2>
          App &amp; Digital
        </h2>
        <a href="#">
          View Project
          <i class="far fa-arrow-alt-circle-right"></i>
        </a>
      </div>
    </article>
    <!--a4-->
    <article>
      <div class="imgBox">
        <div class="image"></div>
      </div>
      <div class="txt">
        <p>BRANDING</p>
        <h2>
          Branding<br>
          Inspiragion
        </h2>
        <a href="#">
          View Project
          <i class="far fa-arrow-alt-circle-right"></i>
        </a>
      </div>
    </article>
    <!--a5-->
    <article>
      <div class="imgBox">
        <div class="image"></div>
      </div>
      <div class="txt">
        <p>EDITORIAL</p>
        <h2>
          Extreme<br>
          Programming
        </h2>
        <a href="#">
          View Project
          <i class="far fa-arrow-alt-circle-right"></i>
        </a>
      </div>
    </article>
  </section>

  <footer>
    <p>&copy; Untitled. All rights reserved.</p>
  </footer>

  <script>
    //페럴랙스 효과
    //window내에서 scroll이벤트 발생시 doScroll함수 호출
    window.addEventListener("scroll",doScroll);

    //doScroll함수 생성
    function doScroll(){
      //스크롤 이동값을 변수에 할당
      let scrollMove = window.scrollY;
      //article의 높이값(padding포함)을 변수에 할당
      let ht = document.querySelector("article").offsetHeight;

      //모든 article요소 선택
      const articles = document.querySelectorAll("article");

      //forEach문으로 article요소를 순회하면서 함수 실행 매개변수el로 순회하는 artlcle요소를 전달받음
      articles.forEach(el => {
        //element.getBoundingClientRect().top; //브라우저의 top위치에서 부터 해당 요소의 top위치를 구해주는 메서드

        //해당 article요소의 y축 절대 좌표값을 thisTop변수에 할당
        //y축 절대 좌표값 = 스크롤 이동값 + 요소의 top위치값
        let thisTop = scrollMove + el.getBoundingClientRect().top;

        //각 변수에 thisTop에 article의 높이 값을 뺀 값과 더한 값을 할당(각 요소에 스크롤 이벤트가 발생할 범위)
        let start = thisTop - ht;
        let end = thisTop + ht;

        //스크롤 이동값이 start변수 값보다 크고 end값보다는 작거나 같을때 코드가 실행 
        if(scrollMove > start && scrollMove <= end){
          //변수에 스크롤 이동값에서 start변수 값을 뺀 값을 할당
          let value = scrollMove - start;

          //해당 순번의 article의 자손인 .image요소를 선택하여 bottom속성값을 value변수값으로 설정 이때 이미지를 아래로 이동시키기 위해 -부호를 적용하고 value값에서 3을 나눠 스크롤 이동값보다 작은 값으로 이동하도록 설정
        el.querySelector(".image").style.bottom = -(value/3) + "px";
        }
      })
    }
    //doScroll함수 호출 = 페이지가 처음 로드되었을때 이미지의 위치를 초기화 하기 위해 호출
    doScroll();
  </script>
</body>
</html>